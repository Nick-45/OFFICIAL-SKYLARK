<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EDUSKYLARK · My Classes</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <style>
        :root {
            --student-blue: #3498db;
            --student-blue-dark: #2980b9;
            --dark-blue: #2c3e50;
            --white: #ffffff;
            --light-blue: #ecf0f1;
            --green: #27ae60;
            --orange: #e67e22;
            --red: #e74c3c;
            --purple: #9b59b6;
            --teal: #1abc9c;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { background: linear-gradient(135deg, #ecf0f1 0%, #d6dbdf 100%); min-height: 100vh; color: var(--dark-blue); }
        
        .background-animation { position: fixed; width: 100%; height: 100%; z-index: -1; overflow: hidden; }
        .bubble { position: absolute; border-radius: 50%; background: rgba(52,152,219,0.1); animation: float 15s infinite ease-in-out; }
        @keyframes float { 0%,100% { transform: translateY(0) scale(1); } 50% { transform: translateY(-20px) scale(1.05); } }
        
        .header { background: linear-gradient(135deg, var(--dark-blue) 0%, #1a2530 100%); color: white; padding: 20px 30px; position: sticky; top: 0; z-index: 100; }
        .header-content { display: flex; justify-content: space-between; align-items: center; max-width: 1400px; margin: 0 auto; }
        .logo-section { display: flex; align-items: center; gap: 20px; }
        .logo { width: 60px; height: 60px; background: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        .church-info h1 { font-size: 24px; font-weight: 700; }
        .church-info p { font-size: 14px; color: var(--student-blue); }
        .student-badge { display: inline-flex; align-items: center; gap: 5px; background: linear-gradient(135deg, var(--student-blue), var(--student-blue-dark)); color: white; padding: 3px 10px; border-radius: 15px; font-size: 12px; margin-left: 10px; }
        
        .dashboard-container { max-width: 1400px; margin: 30px auto; padding: 0 20px; animation: fadeIn 1s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        .page-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .page-header h2 { font-size: 28px; display: flex; align-items: center; gap: 15px; }
        .page-header h2 i { color: var(--student-blue); }
        
        .stats-cards {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px;
        }
        .stat-card {
            background: white; border-radius: 16px; padding: 20px; display: flex; align-items: center; gap: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.03); border-left: 4px solid var(--student-blue);
        }
        .stat-icon { width: 50px; height: 50px; border-radius: 50%; background: rgba(52,152,219,0.1); display: flex; align-items: center; justify-content: center; color: var(--student-blue); font-size: 20px; }
        
        .classes-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 25px; margin-bottom: 40px;
        }
        .class-card {
            background: white; border-radius: 20px; padding: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            border-left: 5px solid var(--student-blue); transition: all 0.3s; cursor: pointer;
        }
        .class-card:hover { transform: translateY(-5px); box-shadow: 0 15px 35px rgba(0,0,0,0.1); }
        
        .class-header { display: flex; align-items: center; gap: 15px; margin-bottom: 20px; }
        .class-icon {
            width: 60px; height: 60px; border-radius: 16px; background: linear-gradient(135deg, var(--student-blue), var(--student-blue-dark));
            display: flex; align-items: center; justify-content: center; color: white; font-size: 24px;
        }
        .class-title { font-size: 22px; font-weight: 700; color: var(--dark-blue); margin-bottom: 5px; }
        .class-teacher { font-size: 14px; color: #666; }
        
        .class-details { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 20px 0; }
        .detail-item { display: flex; align-items: center; gap: 10px; color: #666; font-size: 14px; }
        .detail-item i { width: 20px; color: var(--student-blue); }
        
        .progress-section { margin-top: 20px; padding-top: 20px; border-top: 1px solid #e9ecef; }
        .progress-label { display: flex; justify-content: space-between; font-size: 13px; margin-bottom: 5px; }
        .progress-bar { height: 8px; background: #e9ecef; border-radius: 10px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--student-blue); border-radius: 10px; width: 0%; }
        
        .btn-view {
            width: 100%; padding: 12px; background: rgba(52,152,219,0.1); color: var(--student-blue);
            border: none; border-radius: 30px; font-weight: 600; cursor: pointer; margin-top: 15px;
            transition: all 0.3s;
        }
        .btn-view:hover { background: rgba(52,152,219,0.2); transform: translateY(-2px); }
        
        @media (max-width: 768px) { .menu-toggle { display: block; } .user-section { display: none; } }
    </style>
</head>
<body>
    <div class="background-animation">
        <div class="bubble"></div><div class="bubble"></div><div class="bubble"></div><div class="bubble"></div>
    </div>

    <header class="header">
        <div class="header-content">
            <button class="menu-toggle" id="menuToggle"><i class="fas fa-bars"></i></button>
            <div class="logo-section">
                <div class="logo"><img src="logo.png" alt="EDUSKYLARK" onerror="this.src='https://cdn-icons-png.flaticon.com/512/217/217853.png'"></div>
                <div class="church-info">
                    <h1>EDUSKYLARK · MY CLASSES <span class="student-badge"><i class="fas fa-user-graduate"></i> STUDENT</span></h1>
                    <p>Your Enrolled Subjects</p>
                </div>
            </div>
            <div class="user-section" id="userSection"></div>
        </div>
    </header>

    <main class="dashboard-container">
        <div class="page-header">
            <h2><i class="fas fa-door-open"></i> My Classes</h2>
            <span style="background: rgba(52,152,219,0.1); padding: 10px 20px; border-radius: 30px; color: var(--student-blue); font-weight: 600;" id="classCount">8 Classes</span>
        </div>

        <!-- Stats Cards -->
        <div class="stats-cards">
            <div class="stat-card">
                <div class="stat-icon"><i class="fas fa-chalkboard"></i></div>
                <div><h4>Total Classes</h4><span style="font-size: 28px; font-weight: 700;" id="totalClasses">8</span></div>
            </div>
            <div class="stat-card">
                <div class="stat-icon"><i class="fas fa-tasks"></i></div>
                <div><h4>Assignments</h4><span style="font-size: 28px; font-weight: 700;" id="totalAssignments">5</span></div>
            </div>
            <div class="stat-card">
                <div class="stat-icon"><i class="fas fa-chart-line"></i></div>
                <div><h4>Avg. Progress</h4><span style="font-size: 28px; font-weight: 700;" id="avgProgress">76%</span></div>
            </div>
            <div class="stat-card">
                <div class="stat-icon"><i class="fas fa-pencil-alt"></i></div>
                <div><h4>Upcoming Exams</h4><span style="font-size: 28px; font-weight: 700;" id="upcomingExams">3</span></div>
            </div>
        </div>

        <!-- Classes Grid -->
        <div class="classes-grid" id="classesGrid"></div>
    </main>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAz5knhlAxZwUATy3mtW66Z6lHBrv4tUog",
            authDomain: "toplink-edu.firebaseapp.com",
            projectId: "toplink-edu",
            storageBucket: "toplink-edu.firebasestorage.app",
            messagingSenderId: "35786900143",
            appId: "1:35786900143:web:9e612336393d29324c0a5a"
        };
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        auth.onAuthStateChanged(async (user) => {
            if (!user) window.location.href = 'student-login.html';
            else {
                const userDoc = await db.collection('users').doc(user.uid).get();
                if (!userDoc.exists || (userDoc.data().role !== 'student')) {
                    await auth.signOut();
                    window.location.href = 'student-login.html';
                } else {
                    loadUserData(userDoc.data());
                    loadStudentClasses(user.uid, userDoc.data().schoolId, userDoc.data().studentId);
                }
            }
        });

        function loadUserData(data) {
            document.getElementById('userSection').innerHTML = `
                <div style="display:flex; align-items:center; gap:20px; color:white;">
                    <span>${data.fullName || 'Student'}</span>
                    <button class="logout-btn" id="logoutBtn" style="background:rgba(231,76,60,0.2); color:white; border:2px solid var(--red); padding:8px 16px; border-radius:30px; cursor:pointer;">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>
            `;
            document.getElementById('logoutBtn').addEventListener('click', async () => {
                await auth.signOut();
                window.location.href = 'student-login.html';
            });
        }

        function loadStudentClasses(userId, schoolId, studentId) {
            const classesGrid = document.getElementById('classesGrid');
            
            // Demo data - in production, fetch from Firestore where studentId is in class roster
            classesGrid.innerHTML = `
                <div class="class-card" onclick="window.location.href='student-class-details.html?class=math'">
                    <div class="class-header">
                        <div class="class-icon"><i class="fas fa-calculator"></i></div>
                        <div>
                            <div class="class-title">Mathematics</div>
                            <div class="class-teacher"><i class="fas fa-user"></i> Mr. John Mwangi</div>
                        </div>
                    </div>
                    <div class="class-details">
                        <div class="detail-item"><i class="fas fa-calendar"></i> Mon, Wed, Fri</div>
                        <div class="detail-item"><i class="fas fa-clock"></i> 08:00 - 09:30</div>
                        <div class="detail-item"><i class="fas fa-map-marker-alt"></i> Room 101</div>
                        <div class="detail-item"><i class="fas fa-tasks"></i> 5 Assignments</div>
                    </div>
                    <div class="progress-section">
                        <div class="progress-label">
                            <span>Progress</span>
                            <span style="font-weight:600;">78%</span>
                        </div>
                        <div class="progress-bar"><div class="progress-fill" style="width:78%;"></div></div>
                    </div>
                    <button class="btn-view" onclick="event.stopPropagation(); window.location.href='student-class-details.html?class=math'">View Class Details</button>
                </div>
                <div class="class-card" onclick="window.location.href='student-class-details.html?class=physics'">
                    <div class="class-header">
                        <div class="class-icon"><i class="fas fa-flask"></i></div>
                        <div>
                            <div class="class-title">Physics</div>
                            <div class="class-teacher"><i class="fas fa-user"></i> Ms. Sarah Odhiambo</div>
                        </div>
                    </div>
                    <div class="class-details">
                        <div class="detail-item"><i class="fas fa-calendar"></i> Tue, Thu</div>
                        <div class="detail-item"><i class="fas fa-clock"></i> 10:00 - 11:30</div>
                        <div class="detail-item"><i class="fas fa-map-marker-alt"></i> Lab 203</div>
                        <div class="detail-item"><i class="fas fa-tasks"></i> 3 Assignments</div>
                    </div>
                    <div class="progress-section">
                        <div class="progress-label">
                            <span>Progress</span>
                            <span style="font-weight:600;">65%</span>
                        </div>
                        <div class="progress-bar"><div class="progress-fill" style="width:65%;"></div></div>
                    </div>
                    <button class="btn-view">View Class Details</button>
                </div>
                <div class="class-card" onclick="window.location.href='student-class-details.html?class=english'">
                    <div class="class-header">
                        <div class="class-icon"><i class="fas fa-book"></i></div>
                        <div>
                            <div class="class-title">English Literature</div>
                            <div class="class-teacher"><i class="fas fa-user"></i> Mrs. Jane Wanjiku</div>
                        </div>
                    </div>
                    <div class="class-details">
                        <div class="detail-item"><i class="fas fa-calendar"></i> Mon, Wed</div>
                        <div class="detail-item"><i class="fas fa-clock"></i> 11:30 - 13:00</div>
                        <div class="detail-item"><i class="fas fa-map-marker-alt"></i> Room 305</div>
                        <div class="detail-item"><i class="fas fa-tasks"></i> 4 Assignments</div>
                    </div>
                    <div class="progress-section">
                        <div class="progress-label">
                            <span>Progress</span>
                            <span style="font-weight:600;">82%</span>
                        </div>
                        <div class="progress-bar"><div class="progress-fill" style="width:82%;"></div></div>
                    </div>
                    <button class="btn-view">View Class Details</button>
                </div>
                <div class="class-card" onclick="window.location.href='student-class-details.html?class=chemistry'">
                    <div class="class-header">
                        <div class="class-icon"><i class="fas fa-flask"></i></div>
                        <div>
                            <div class="class-title">Chemistry</div>
                            <div class="class-teacher"><i class="fas fa-user"></i> Dr. David Kimani</div>
                        </div>
                    </div>
                    <div class="class-details">
                        <div class="detail-item"><i class="fas fa-calendar"></i> Tue, Thu, Fri</div>
                        <div class="detail-item"><i class="fas fa-clock"></i> 14:00 - 15:30</div>
                        <div class="detail-item"><i class="fas fa-map-marker-alt"></i> Lab 101</div>
                        <div class="detail-item"><i class="fas fa-tasks"></i> 2 Assignments</div>
                    </div>
                    <div class="progress-section">
                        <div class="progress-label">
                            <span>Progress</span>
                            <span style="font-weight:600;">71%</span>
                        </div>
                        <div class="progress-bar"><div class="progress-fill" style="width:71%;"></div></div>
                    </div>
                    <button class="btn-view">View Class Details</button>
                </div>
                <div class="class-card" onclick="window.location.href='student-class-details.html?class=biology'">
                    <div class="class-header">
                        <div class="class-icon"><i class="fas fa-leaf"></i></div>
                        <div>
                            <div class="class-title">Biology</div>
                            <div class="class-teacher"><i class="fas fa-user"></i> Dr. Esther Muthoni</div>
                        </div>
                    </div>
                    <div class="class-details">
                        <div class="detail-item"><i class="fas fa-calendar"></i> Mon, Wed</div>
                        <div class="detail-item"><i class="fas fa-clock"></i> 09:30 - 11:00</div>
                        <div class="detail-item"><i class="fas fa-map-marker-alt"></i> Lab 105</div>
                        <div class="detail-item"><i class="fas fa-tasks"></i> 3 Assignments</div>
                    </div>
                    <div class="progress-section">
                        <div class="progress-label">
                            <span>Progress</span>
                            <span style="font-weight:600;">69%</span>
                        </div>
                        <div class="progress-bar"><div class="progress-fill" style="width:69%;"></div></div>
                    </div>
                    <button class="btn-view">View Class Details</button>
                </div>
                <div class="class-card" onclick="window.location.href='student-class-details.html?class=history'">
                    <div class="class-header">
                        <div class="class-icon"><i class="fas fa-landmark"></i></div>
                        <div>
                            <div class="class-title">History</div>
                            <div class="class-teacher"><i class="fas fa-user"></i> Mr. James Kiprop</div>
                        </div>
                    </div>
                    <div class="class-details">
                        <div class="detail-item"><i class="fas fa-calendar"></i> Tue, Thu</div>
                        <div class="detail-item"><i class="fas fa-clock"></i> 12:00 - 13:30</div>
                        <div class="detail-item"><i class="fas fa-map-marker-alt"></i> Room 204</div>
                        <div class="detail-item"><i class="fas fa-tasks"></i> 2 Assignments</div>
                    </div>
                    <div class="progress-section">
                        <div class="progress-label">
                            <span>Progress</span>
                            <span style="font-weight:600;">88%</span>
                        </div>
                        <div class="progress-bar"><div class="progress-fill" style="width:88%;"></div></div>
                    </div>
                    <button class="btn-view">View Class Details</button>
                </div>
                <div class="class-card" onclick="window.location.href='student-class-details.html?class=geography'">
                    <div class="class-header">
                        <div class="class-icon"><i class="fas fa-globe"></i></div>
                        <div>
                            <div class="class-title">Geography</div>
                            <div class="class-teacher"><i class="fas fa-user"></i> Mrs. Lucy Wambui</div>
                        </div>
                    </div>
                    <div class="class-details">
                        <div class="detail-item"><i class="fas fa-calendar"></i> Fri</div>
                        <div class="detail-item"><i class="fas fa-clock"></i> 08:00 - 10:30</div>
                        <div class="detail-item"><i class="fas fa-map-marker-alt"></i> Room 106</div>
                        <div class="detail-item"><i class="fas fa-tasks"></i> 1 Assignment</div>
                    </div>
                    <div class="progress-section">
                        <div class="progress-label">
                            <span>Progress</span>
                            <span style="font-weight:600;">75%</span>
                        </div>
                        <div class="progress-bar"><div class="progress-fill" style="width:75%;"></div></div>
                    </div>
                    <button class="btn-view">View Class Details</button>
                </div>
                <div class="class-card" onclick="window.location.href='student-class-details.html?class=kiswahili'">
                    <div class="class-header">
                        <div class="class-icon"><i class="fas fa-language"></i></div>
                        <div>
                            <div class="class-title">Kiswahili</div>
                            <div class="class-teacher"><i class="fas fa-user"></i> Mr. Ali Hassan</div>
                        </div>
                    </div>
                    <div class="class-details">
                        <div class="detail-item"><i class="fas fa-calendar"></i> Wed, Fri</div>
                        <div class="detail-item"><i class="fas fa-clock"></i> 13:30 - 15:00</div>
                        <div class="detail-item"><i class="fas fa-map-marker-alt"></i> Room 108</div>
                        <div class="detail-item"><i class="fas fa-tasks"></i> 2 Assignments</div>
                    </div>
                    <div class="progress-section">
                        <div class="progress-label">
                            <span>Progress</span>
                            <span style="font-weight:600;">81%</span>
                        </div>
                        <div class="progress-bar"><div class="progress-fill" style="width:81%;"></div></div>
                    </div>
                    <button class="btn-view">View Class Details</button>
                </div>
            `;
            
            document.getElementById('totalClasses').textContent = '8';
            document.getElementById('totalAssignments').textContent = '22';
            document.getElementById('avgProgress').textContent = '76%';
            document.getElementById('upcomingExams').textContent = '5';
            document.getElementById('classCount').textContent = '8 Classes';
        }

        document.getElementById('menuToggle').addEventListener('click', () => alert('Mobile menu would open'));
    </script>
</body>
</html>
